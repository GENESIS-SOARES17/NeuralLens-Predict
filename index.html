<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neura Testnet - AI-Powered Trading Predictions</title>
    
    <!-- Ethers.js -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@6/dist/ethers.min.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Reset & Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            min-height: 100vh;
            padding: 20px;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #3b82f6;
        }

        .logo-title-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .main-logo {
            height: 50px;
            width: auto;
            border-radius: 8px;
            object-fit: contain;
        }

        .header h1 {
            font-size: 2rem;
            color: #60a5fa;
            margin-bottom: 5px;
        }

        .network-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: #3b82f620;
            color: #60a5fa;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .warning {
            background-color: #f59e0b20;
            border-left: 4px solid #f59e0b;
            padding: 12px 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .quick-action-btn {
            background: #475569;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .quick-action-btn:hover {
            background: #3b82f6;
            transform: translateY(-2px);
        }

        /* Wallet Section */
        .wallet-section {
            background: #1e293b;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #334155;
            min-width: 350px;
        }

        .wallet-status {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }

        .wallet-info {
            flex: 1;
            min-width: 250px;
        }

        .wallet-label {
            color: #94a3b8;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .wallet-address {
            background: #0f172a;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid #334155;
            color: #94a3b8;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            font-family: monospace;
        }

        .wallet-address.connected {
            border-color: #10b981;
            color: #10b981;
            background: #10b98110;
        }

        .wallet-details {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            background: #475569;
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wallet-detection {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-top: 10px;
        }

        /* Wallet Actions */
        .wallet-actions {
            display: flex;
            gap: 10px;
            position: relative;
        }

        .connect-btn, .disconnect-btn {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 200px;
            justify-content: center;
            transition: all 0.3s;
        }

        .connect-btn {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .connect-btn:hover {
            background: linear-gradient(135deg, #059669, #047857);
            transform: translateY(-2px);
        }

        .disconnect-btn {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .disconnect-btn:hover {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            transform: translateY(-2px);
        }

        /* Wallet Dropdown */
        .wallet-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 8px;
            margin-top: 5px;
            padding: 10px;
            display: none;
            flex-direction: column;
            gap: 5px;
            z-index: 1000;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .wallet-dropdown.show {
            display: flex;
        }

        .wallet-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            background: transparent;
            border: none;
            color: #e2e8f0;
            text-align: left;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .wallet-option:hover {
            background: #3b82f620;
        }

        .wallet-option.unavailable {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Statistics */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #1e293b;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #334155;
        }

        .stat-card h3 {
            color: #94a3b8;
            font-size: 1rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .value {
            font-size: 2rem;
            font-weight: bold;
            color: #60a5fa;
            margin-bottom: 10px;
        }

        .volume-indicator, .gas-fee {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-top: 5px;
        }

        .progress-bar {
            height: 4px;
            background: #334155;
            border-radius: 2px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
            transition: width 0.3s;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-ready {
            background: #10b98120;
            color: #10b981;
        }

        .performance-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-top: 5px;
        }

        .performance-positive {
            background: #10b98120;
            color: #10b981;
        }

        /* Advanced Stats */
        .advanced-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-item {
            background: #1e293b;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #334155;
            text-align: center;
        }

        .stat-item .label {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-bottom: 5px;
        }

        .stat-item .value {
            font-size: 1.1rem;
            color: #60a5fa;
        }

        .sentiment-indicator {
            height: 6px;
            background: #334155;
            border-radius: 3px;
            margin-top: 5px;
            overflow: hidden;
        }

        .sentiment-bullish {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #059669);
        }

        /* Refresh Container */
        .refresh-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .refresh-button {
            background: #475569;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s;
        }

        .refresh-button:hover {
            background: #3b82f6;
        }

        .refresh-button.secondary {
            background: #334155;
        }

        /* Prediction Timer */
        .prediction-timer {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: 600;
            display: none;
        }

        .prediction-timer.show {
            display: block;
        }

        /* AI Suggestion */
        .ai-suggestion {
            background: #1e293b;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 0 8px 8px 0;
            display: none;
        }

        .ai-suggestion.show {
            display: block;
        }

        .ai-suggestion h4 {
            color: #60a5fa;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .risk-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-top: 10px;
        }

        .risk-low {
            background: #10b98120;
            color: #10b981;
        }

        .risk-medium {
            background: #f59e0b20;
            color: #f59e0b;
        }

        .risk-high {
            background: #ef444420;
            color: #ef4444;
        }

        /* Main Tabs */
        .main-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid #334155;
            padding-bottom: 10px;
        }

        .main-tab {
            background: transparent;
            color: #94a3b8;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .main-tab.active {
            background: #3b82f6;
            color: white;
        }

        /* Sections */
        .section {
            background: #1e293b;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid #334155;
            display: none;
        }

        .section.active {
            display: block;
        }

        .section-title {
            color: #60a5fa;
            margin-bottom: 20px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #cbd5e1;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            background: #0f172a;
            border: 1px solid #475569;
            border-radius: 8px;
            color: #e2e8f0;
            font-size: 1rem;
        }

        .form-control:focus {
            outline: none;
            border-color: #3b82f6;
        }

        .form-hint {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-top: 5px;
        }

        .transaction-details {
            background: #0f172a;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .detail-label {
            color: #94a3b8;
        }

        .detail-value {
            color: #60a5fa;
            font-weight: 500;
        }

        .gas-estimate {
            background: #0f172a;
            border-radius: 8px;
            padding: 12px;
            margin: 15px 0;
            font-size: 0.9rem;
            color: #94a3b8;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .button {
            display: inline-block;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            text-align: center;
        }

        .button:hover:not(:disabled) {
            background: linear-gradient(135deg, #2563eb, #1e40af);
            transform: translateY(-2px);
        }

        .button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .button.primary {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .button.primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #059669, #047857);
        }

        .button.secondary {
            background: #475569;
        }

        .info-box {
            background: #0f172a;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            margin-top: 20px;
            border-radius: 0 8px 8px 0;
            display: flex;
            gap: 10px;
            color: #94a3b8;
            font-size: 0.9rem;
        }

        /* Asset Selection */
        .assets-filter {
            margin-bottom: 20px;
        }

        .filter-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }

        .filter-tab {
            background: #0f172a;
            border: 1px solid #334155;
            color: #94a3b8;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .filter-tab.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .search-container {
            position: relative;
        }

        .search-assets {
            width: 100%;
            padding: 12px 15px 12px 40px;
            background: #0f172a;
            border: 1px solid #475569;
            border-radius: 8px;
            color: #e2e8f0;
            font-size: 1rem;
        }

        .search-container i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
        }

        .assets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .asset-card {
            background: #0f172a;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            border: 1px solid #334155;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .asset-card:hover {
            border-color: #3b82f6;
            transform: translateY(-2px);
        }

        .asset-card.selected {
            border-color: #10b981;
            background: #10b98110;
        }

        .asset-rank {
            position: absolute;
            top: 8px;
            left: 8px;
            background: #475569;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .asset-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .asset-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #475569;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .asset-name {
            font-weight: bold;
            font-size: 1rem;
        }

        .asset-symbol {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-bottom: 8px;
        }

        .asset-price {
            color: #10b981;
            font-size: 1rem;
            font-weight: 500;
            margin-bottom: 5px;
        }

        .asset-change {
            font-size: 0.8rem;
        }

        .asset-change.positive {
            color: #10b981;
        }

        .asset-change.negative {
            color: #ef4444;
        }

        .price-trend {
            height: 4px;
            margin-top: 10px;
            border-radius: 2px;
            overflow: hidden;
        }

        .trend-line {
            height: 100%;
        }

        .trend-line.positive {
            background: linear-gradient(90deg, #10b981, #059669);
        }

        .trend-line.negative {
            background: linear-gradient(90deg, #ef4444, #dc2626);
        }

        /* Risk Calculator */
        .risk-calculator {
            background: #0f172a;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .risk-calculator h4 {
            color: #94a3b8;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .risk-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .risk-item {
            text-align: center;
        }

        .risk-item .risk-label {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-bottom: 5px;
        }

        .risk-item .risk-value {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .risk-item .risk-value.positive {
            color: #10b981;
        }

        .risk-item .risk-value.negative {
            color: #ef4444;
        }

        /* Form Layout */
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .slider-container {
            position: relative;
            padding-top: 30px;
        }

        .slider-ticks {
            display: flex;
            justify-content: space-between;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            font-size: 0.7rem;
            color: #94a3b8;
        }

        .value-display {
            display: inline-block;
            background: #3b82f6;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-left: 5px;
        }

        /* Direction Selection */
        .direction-selection {
            margin: 20px 0;
        }

        .direction-label {
            color: #cbd5e1;
            font-weight: 500;
            margin-bottom: 10px;
            display: block;
        }

        .direction-buttons {
            display: flex;
            gap: 15px;
        }

        .direction-btn {
            flex: 1;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .direction-btn.up {
            background: #10b98120;
            border-color: #10b981;
            color: #10b981;
        }

        .direction-btn.up:hover,
        .direction-btn.up.selected {
            background: #10b981;
            color: white;
        }

        .direction-btn.down {
            background: #ef444420;
            border-color: #ef4444;
            color: #ef4444;
        }

        .direction-btn.down:hover,
        .direction-btn.down.selected {
            background: #ef4444;
            color: white;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        /* Chart */
        .chart-container {
            margin-top: 30px;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .chart-timeframe {
            display: flex;
            gap: 5px;
        }

        .timeframe-btn {
            padding: 6px 12px;
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 4px;
            color: #94a3b8;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .timeframe-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .price-chart {
            width: 100%;
            height: 200px;
            background: #0f172a;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }

        #chartCanvas {
            width: 100%;
            height: 100%;
        }

        /* Pending Predictions */
        .pending-predictions {
            background: #1e293b;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid #334155;
            display: none;
        }

        .pending-predictions.show {
            display: block;
        }

        .pending-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .pending-item {
            background: #0f172a;
            border-radius: 8px;
            padding: 12px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Social Trading */
        .social-trading {
            background: #1e293b;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid #334155;
        }

        .traders-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .trader-item {
            background: #0f172a;
            border-radius: 8px;
            padding: 12px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Footer */
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #334155;
            color: #94a3b8;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 20px;
        }

        .footer-section h4 {
            color: #60a5fa;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .wallets-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .wallet-badge {
            background: #475569;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
        }

        .contract-address {
            font-family: monospace;
            background: #0f172a;
            padding: 8px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .copy-small {
            background: transparent;
            border: none;
            color: #94a3b8;
            cursor: pointer;
            padding: 4px;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #334155;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
        }

        .footer-link {
            color: #60a5fa;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Settings */
        .settings-panel {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .settings-toggle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #3b82f6;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        /* Responsive */
        @media (max-width: 992px) {
            .header {
                flex-direction: column;
                gap: 20px;
            }
            
            .wallet-section {
                width: 100%;
                min-width: auto;
            }
            
            .assets-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 10px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .advanced-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .direction-buttons {
                flex-direction: column;
            }
            
            .form-actions {
                flex-direction: column;
            }
            
            .main-tabs {
                flex-wrap: wrap;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .advanced-stats {
                grid-template-columns: 1fr;
            }
            
            .assets-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .wallet-actions {
                flex-direction: column;
                width: 100%;
            }
            
            .connect-btn, .disconnect-btn {
                width: 100%;
            }
            
            .filter-tabs {
                justify-content: center;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1e293b;
        }

        ::-webkit-scrollbar-thumb {
            background: #3b82f6;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #2563eb;
        }

        /* Focus States */
        button:focus,
        input:focus,
        select:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }

        /* Loading States */
        .loading {
            position: relative;
            pointer-events: none;
            opacity: 0.7;
        }

        .loading::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            top: 50%;
            left: 50%;
            margin: -10px 0 0 -10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Notification Container -->
    <div id="notificationContainer" style="position: fixed; top: 20px; right: 20px; z-index: 9999;"></div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <div style="flex: 1;">
                <div class="logo-title-container">
                    <!-- Logo da Neura -->
                    <img src="logoneura1.png" alt="Neura Logo" class="main-logo">
                    <div>
                        <h1>NeuralLens Predict</h1>
                        <div class="network-indicator">
                            <i class="fas fa-network-wired"></i>
                            <span id="networkStatus">Neura Testnet</span>
                        </div>
                    </div>
                </div>
                
                <div class="warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>
                        <strong>IMPORTANT:</strong> Please switch to Neura Testnet (Chain ID: 267) for optimal performance.
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="quick-actions">
                    <button class="quick-action-btn" id="quickWithdraw">
                        <i class="fas fa-file-export"></i> Quick Withdraw
                    </button>
                    <button class="quick-action-btn" id="quickTrade">
                        <i class="fas fa-bolt"></i> Quick Trade
                    </button>
                    <button class="quick-action-btn" id="viewLeaderboard">
                        <i class="fas fa-trophy"></i> Leaderboard
                    </button>
                    <button class="quick-action-btn" id="openFaucet">
                        <i class="fas fa-faucet"></i> Get Test ANKR
                    </button>
                </div>
            </div>
            
            <!-- Wallet Section -->
            <div class="wallet-section">
                <div class="wallet-status">
                    <div class="wallet-info">
                        <div class="wallet-label">Wallet Status</div>
                        <div id="walletAddress" class="wallet-address">
                            <div class="wallet-details">
                                <i class="fas fa-wallet" id="walletIcon" style="display: none;"></i>
                                <span id="addressText">Not connected</span>
                            </div>
                            <div class="action-buttons">
                                <button class="action-btn" id="copyAddressBtn" style="display: none;" title="Copy address">
                                    <i class="far fa-copy"></i>
                                </button>
                                <button class="action-btn" id="explorerBtn" style="display: none;" title="View in explorer">
                                    <i class="fas fa-external-link-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div class="wallet-detection">
                            Detected wallets: <span id="detectedWallets">Scanning...</span>
                        </div>
                    </div>
                    
                    <div class="wallet-actions">
                        <button id="connectWalletBtn" class="connect-btn">
                            <i class="fas fa-wallet"></i> Connect Wallet
                        </button>
                        <div class="wallet-dropdown" id="walletDropdown">
                            <!-- Wallet options will be added here -->
                        </div>
                        <button id="disconnectWalletBtn" class="disconnect-btn" style="display: none;">
                            <i class="fas fa-plug"></i> Disconnect
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3><i class="fas fa-coins"></i> ANKR Balance</h3>
                <div id="ankrBalance" class="value">0</div>
                <div class="volume-indicator">
                    24h Volume: <span id="dailyVolume">$0</span>
                </div>
                <div class="gas-fee">
                    <i class="fas fa-gas-pump"></i> Gas: <span id="gasPrice">4.72</span> Gwei
                </div>
            </div>
            
            <div class="stat-card">
                <h3><i class="fas fa-chart-line"></i> Active Predictions</h3>
                <div id="activePredictions" class="value">0</div>
                <div class="progress-bar">
                    <div id="predictionProgress" class="progress-fill" style="width: 0%"></div>
                </div>
                <div style="margin-top: 10px; font-size: 0.8rem; color: #94a3b8;">
                    Contract: <span class="status-badge status-ready">Ready</span>
                </div>
            </div>
            
            <div class="stat-card">
                <h3><i class="fas fa-list-alt"></i> Total Predictions</h3>
                <div id="totalPredictions" class="value">0</div>
                <div id="winRate" class="performance-badge performance-positive">
                    Win Rate: 0%
                </div>
                <div style="margin-top: 10px; font-size: 0.8rem; color: #94a3b8;">
                    Network: <span>Neura Testnet</span>
                </div>
            </div>
            
            <div class="stat-card">
                <h3><i class="fas fa-user"></i> Status</h3>
                <div id="ownerStatus" class="value">Not connected</div>
                <div id="ownerBadge" class="owner-badge" style="display: none; background: #10b981; color: white; padding: 4px 12px; border-radius: 12px; font-size: 0.8rem; margin-top: 5px;">
                    <i class="fas fa-crown"></i> OWNER
                </div>
                <div style="margin-top: 10px; font-size: 0.8rem; color: #94a3b8;">
                    Chain ID: <span id="chainId">--</span>
                </div>
            </div>
        </div>

        <!-- Advanced Statistics -->
        <div class="advanced-stats">
            <div class="stat-item">
                <div class="label">Total Value Locked</div>
                <div id="tvlValue" class="value">$0</div>
            </div>
            <div class="stat-item">
                <div class="label">Avg. ROI</div>
                <div id="avgROI" class="value">0%</div>
            </div>
            <div class="stat-item">
                <div class="label">Active Users</div>
                <div id="activeUsers" class="value">0</div>
            </div>
            <div class="stat-item">
                <div class="label">Market Sentiment</div>
                <div id="marketSentiment" class="value">Neutral</div>
                <div class="sentiment-indicator">
                    <div id="sentimentBar" class="sentiment-bullish" style="width: 50%"></div>
                </div>
            </div>
        </div>

        <!-- Refresh Container -->
        <div class="refresh-container">
            <button id="refreshStatsBtn" class="refresh-button">
                <i class="fas fa-sync-alt"></i> Refresh All Data
            </button>
            <button id="exportDataBtn" class="refresh-button secondary">
                <i class="fas fa-download"></i> Export Data
            </button>
        </div>

        <!-- Prediction Timer -->
        <div id="predictionTimer" class="prediction-timer">
            <i class="fas fa-clock"></i> Next prediction closes in: 
            <span id="timerCountdown">05:00</span>
        </div>

        <!-- AI Suggestion -->
        <div id="aiSuggestion" class="ai-suggestion">
            <h4><i class="fas fa-robot"></i> AI Suggestion</h4>
            <p id="suggestionText">Based on market analysis, ANKR shows strong bullish signals.</p>
            <div id="suggestionRisk" class="risk-badge risk-medium">
                <i class="fas fa-shield-alt"></i> MEDIUM RISK
            </div>
        </div>

        <!-- Main Tabs -->
        <div class="main-tabs">
            <button class="main-tab active" data-tab="liquidity">
                <i class="fas fa-water"></i> Add Liquidity
            </button>
            <button class="main-tab" data-tab="predict">
                <i class="fas fa-crystal-ball"></i> Make Prediction
            </button>
            <button class="main-tab" data-tab="history">
                <i class="fas fa-history"></i> History
            </button>
        </div>

        <!-- Liquidity Section -->
        <section id="liquiditySection" class="section active">
            <h2 class="section-title">
                <i class="fas fa-water"></i> Add Liquidity
            </h2>
            
            <form id="liquidityForm">
                <div class="form-group">
                    <label for="amount">
                        <i class="fas fa-coins"></i> Amount (ANKR)
                    </label>
                    <input type="number" id="amount" class="form-control" 
                           value="10" min="1" step="0.1" required>
                    <div class="form-hint">Minimum: 1 ANKR</div>
                </div>
                
                <div class="transaction-details">
                    <div class="detail-row">
                        <span class="detail-label">You will receive:</span>
                        <span id="liquidityShares" class="detail-value">0 LP tokens</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Exchange rate:</span>
                        <span class="detail-value">1 ANKR = 1 LP token</span>
                    </div>
                </div>
                
                <div class="gas-estimate">
                    <i class="fas fa-gas-pump"></i> Estimated gas: 
                    <span id="liquidityGas">--</span> ANKR
                </div>
                
                <button id="addLiquidityBtn" class="button primary" type="submit" disabled>
                    <span id="addLiquidityText">
                        <i class="fas fa-plus-circle"></i> Add Liquidity
                    </span>
                </button>
            </form>
            
            <div class="info-box">
                <i class="fas fa-info-circle"></i>
                <p>Add ANKR to the contract to enable prize payments. Your liquidity earns fees from prediction trades.</p>
            </div>
        </section>

        <!-- Prediction Section -->
        <section id="predictSection" class="section">
            <h2 class="section-title">
                <i class="fas fa-crystal-ball"></i> Make Prediction
            </h2>
            
            <!-- Risk Calculator -->
            <div class="risk-calculator" id="riskCalculator">
                <h4><i class="fas fa-calculator"></i> Risk Calculator</h4>
                <div class="detail-row">
                    <span class="detail-label">Risk Level:</span>
                    <span id="riskLevel" class="risk-badge risk-medium">MEDIUM</span>
                </div>
                <div class="risk-grid">
                    <div class="risk-item">
                        <div class="risk-label">Potential Profit</div>
                        <div id="potentialProfit" class="risk-value positive">$0.00</div>
                    </div>
                    <div class="risk-item">
                        <div class="risk-label">Potential Loss</div>
                        <div id="potentialLoss" class="risk-value negative">$0.00</div>
                    </div>
                    <div class="risk-item">
                        <div class="risk-label">Success Probability</div>
                        <div id="successProbability" class="risk-value">50%</div>
                    </div>
                    <div class="risk-item">
                        <div class="risk-label">Risk/Reward</div>
                        <div id="riskReward" class="risk-value">1:2</div>
                    </div>
                </div>
                <div class="gas-estimate">
                    <i class="fas fa-gas-pump"></i> Estimated gas: 
                    <span id="predictionGas">--</span> ANKR
                </div>
            </div>

            <!-- Asset Selection -->
            <div style="margin-bottom: 30px;">
                <h3 style="color: #94a3b8; margin-bottom: 15px; font-size: 1rem;">
                    <i class="fas fa-search"></i> Select Asset
                </h3>
                
                <div class="assets-filter">
                    <div class="filter-tabs">
                        <button class="filter-tab active" data-filter="all">All</button>
                        <button class="filter-tab" data-filter="top10">Top 10</button>
                        <button class="filter-tab" data-filter="layer1">Layer 1</button>
                        <button class="filter-tab" data-filter="defi">DeFi</button>
                        <button class="filter-tab" data-filter="metaverse">Metaverse</button>
                    </div>
                    
                    <div class="search-container">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchAssets" class="search-assets" 
                               placeholder="Search asset by name or symbol...">
                    </div>
                </div>
                
                <div class="assets-grid" id="assetsGrid">
                    <!-- Assets will be loaded here -->
                </div>
            </div>

            <!-- Prediction Form -->
            <form id="predictionForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="entry-price">
                            <i class="fas fa-arrow-right"></i> Entry Price (USD)
                        </label>
                        <input type="number" id="entry-price" class="form-control" 
                               value="0.05" step="0.0001" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="predictionAmount">
                            <i class="fas fa-coins"></i> Amount (ANKR)
                        </label>
                        <input type="number" id="predictionAmount" class="form-control" 
                               value="10" min="1" step="0.1" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="leverage">
                        <i class="fas fa-expand-alt"></i> Leverage: 
                        <span id="leverage-value" class="value-display">10x</span>
                    </label>
                    <div class="slider-container">
                        <input type="range" id="leverage" class="form-control" 
                               min="1" max="20" value="10" step="1">
                        <div class="slider-ticks">
                            <span>1x</span>
                            <span>5x</span>
                            <span>10x</span>
                            <span>15x</span>
                            <span>20x</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="duration">
                        <i class="fas fa-clock"></i> Duration
                    </label>
                    <select id="duration" class="form-control">
                        <option value="300">5 minutes</option>
                        <option value="900">15 minutes</option>
                        <option value="1800">30 minutes</option>
                        <option value="3600">1 hour</option>
                        <option value="14400">4 hours</option>
                        <option value="86400">1 day</option>
                    </select>
                </div>
                
                <div class="direction-selection">
                    <span class="direction-label">Prediction Direction</span>
                    <div class="direction-buttons">
                        <button type="button" class="direction-btn up selected" data-direction="up">
                            <i class="fas fa-arrow-up"></i> UP
                        </button>
                        <button type="button" class="direction-btn down" data-direction="down">
                            <i class="fas fa-arrow-down"></i> DOWN
                        </button>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button id="simulatePredictionBtn" class="button secondary" type="button">
                        <i class="fas fa-play-circle"></i> Simulate
                    </button>
                    <button id="placePredictionBtn" class="button" type="submit" disabled>
                        <span id="placePredictionText">
                            <i class="fas fa-rocket"></i> Make Prediction
                        </span>
                    </button>
                </div>
            </form>
            
            <!-- Price Chart Preview -->
            <div class="chart-container">
                <div class="chart-header">
                    <h3 style="color: #94a3b8; font-size: 1rem;">
                        <i class="fas fa-chart-line"></i> Price Chart
                    </h3>
                    <div class="chart-timeframe">
                        <button class="timeframe-btn active" data-timeframe="5m">5m</button>
                        <button class="timeframe-btn" data-timeframe="15m">15m</button>
                        <button class="timeframe-btn" data-timeframe="1h">1h</button>
                        <button class="timeframe-btn" data-timeframe="4h">4h</button>
                    </div>
                </div>
                <div class="price-chart">
                    <canvas id="chartCanvas"></canvas>
                </div>
            </div>
        </section>

        <!-- History Section -->
        <section id="historySection" class="section">
            <h2 class="section-title">
                <i class="fas fa-history"></i> Transaction History
                <div style="margin-left: auto; display: flex; gap: 10px;">
                    <button id="exportHistory" class="action-btn" title="Export history">
                        <i class="fas fa-file-export"></i>
                    </button>
                    <button id="clearHistory" class="action-btn" title="Clear history">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </div>
            </h2>
            
            <div class="table-responsive" style="overflow-x: auto;">
                <table style="width: 100%; border-collapse: collapse; min-width: 800px;">
                    <thead>
                        <tr style="background: #0f172a;">
                            <th style="padding: 12px 15px; text-align: left; color: #94a3b8; font-weight: 500;">TX Hash</th>
                            <th style="padding: 12px 15px; text-align: left; color: #94a3b8; font-weight: 500;">Asset</th>
                            <th style="padding: 12px 15px; text-align: left; color: #94a3b8; font-weight: 500;">Direction</th>
                            <th style="padding: 12px 15px; text-align: left; color: #94a3b8; font-weight: 500;">Entry</th>
                            <th style="padding: 12px 15px; text-align: left; color: #94a3b8; font-weight: 500;">Current</th>
                            <th style="padding: 12px 15px; text-align: left; color: #94a3b8; font-weight: 500;">Result</th>
                            <th style="padding: 12px 15px; text-align: left; color: #94a3b8; font-weight: 500;">Value</th>
                            <th style="padding: 12px 15px; text-align: left; color: #94a3b8; font-weight: 500;">Status</th>
                        </tr>
                    </thead>
                    <tbody id="transactionHistory">
                        <tr>
                            <td colspan="8" style="text-align: center; padding: 40px; color: #94a3b8;">
                                <i class="fas fa-history" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                                <p>No transactions yet</p>
                                <p style="font-size: 0.9rem; margin-top: 5px;">Connect your wallet to view transaction history</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Pending Predictions -->
        <div id="pendingPredictions" class="pending-predictions">
            <h3 class="section-title">
                <i class="fas fa-clock"></i> Pending Predictions
                <span id="pendingCount" style="background: #3b82f6; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.8rem;">0</span>
            </h3>
            <div id="pendingList" class="pending-list">
                <!-- Pending predictions will be loaded here -->
            </div>
        </div>

        <!-- Social Trading -->
        <div class="social-trading">
            <h3 class="section-title">
                <i class="fas fa-users"></i> Top Traders This Week
                <button id="refreshTraders" class="action-btn" style="margin-left: auto;">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </h3>
            <div id="topTraders" class="traders-list">
                <!-- Top traders will be loaded here -->
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h4><i class="fas fa-network-wired"></i> Network Info</h4>
                    <p>Connected to: <strong id="currentNetwork">Neura Testnet</strong></p>
                    <p>Chain ID: <strong id="footerChainId">267</strong></p>
                </div>
                
                <div class="footer-section">
                    <h4><i class="fas fa-wallet"></i> Supported Wallets</h4>
                    <div class="wallets-list">
                        <span class="wallet-badge">MetaMask</span>
                        <span class="wallet-badge">OKX</span>
                        <span class="wallet-badge">Rabby</span>
                        <span class="wallet-badge">Trust</span>
                        <span class="wallet-badge">Coinbase</span>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h4><i class="fas fa-file-contract"></i> Smart Contract</h4>
                    <p class="contract-address">
                        <code>0x742d35Cc6634C0532925a3b844Bc9e...</code>
                        <button class="copy-small" title="Copy contract address">
                            <i class="far fa-copy"></i>
                        </button>
                    </p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>
                    <i class="fas fa-code"></i> Neura Testnet  2024 
                    <span style="margin: 0 10px;">|</span> 
                    <i class="fas fa-shield-alt"></i> Hackathon Ready
                    <span style="margin: 0 10px;">|</span> 
                    <i class="fas fa-heart"></i> Built with 
                </p>
                <div class="footer-links">
                    <a href="#" class="footer-link"><i class="fas fa-book"></i> Docs</a>
                    <a href="#" class="footer-link"><i class="fas fa-shield-alt"></i> Privacy</a>
                    <a href="#" class="footer-link"><i class="fas fa-file-contract"></i> Terms</a>
                    <a href="#" class="footer-link"><i class="fas fa-envelope"></i> Contact</a>
                    <a href="#" class="footer-link"><i class="fab fa-github"></i> GitHub</a>
                </div>
            </div>
        </footer>
    </div>

    <!-- Settings Toggle -->
    <div class="settings-panel">
        <button class="settings-toggle" id="settingsToggle">
            <i class="fas fa-cog"></i>
        </button>
    </div>

    <script>
        // Configuration
        const CONFIG = {
            NETWORK: {
                chainId: '0x10B',
                chainName: 'Neura Testnet',
                rpcUrls: ['https://testnet.rpc.neura.org'],
                blockExplorer: 'https://testnet.neura.org'
            },
            DEMO_MODE: true,
            REFRESH_INTERVAL: 30000,
            PREDICTION_TIMER: 300
        };

        // App State
        const state = {
            isConnected: false,
            walletAddress: '',
            walletType: '',
            provider: null,
            signer: null,
            balance: '0',
            activePredictions: 0,
            totalPredictions: 0,
            isOwner: false,
            selectedAsset: null,
            transactions: [],
            pendingPredictions: [],
            topTraders: [],
            assets: [
                { rank: 1, symbol: 'ANKR', name: 'Ankr', price: 0.05, change: 3.2, category: 'layer1' },
                { rank: 2, symbol: 'BTC', name: 'Bitcoin', price: 54851, change: 1.8, category: 'layer1' },
                { rank: 3, symbol: 'ETH', name: 'Ethereum', price: 3721, change: 2.4, category: 'layer1' },
                { rank: 4, symbol: 'BNB', name: 'Binance Coin', price: 405, change: 0.8, category: 'layer1' },
                { rank: 5, symbol: 'SOL', name: 'Solana', price: 182, change: 5.6, category: 'layer1' },
                { rank: 6, symbol: 'XRP', name: 'Ripple', price: 0.62, change: -0.3, category: 'layer1' },
                { rank: 7, symbol: 'ADA', name: 'Cardano', price: 0.58, change: 1.2, category: 'layer1' },
                { rank: 8, symbol: 'DOGE', name: 'Dogecoin', price: 0.15, change: 2.1, category: 'meme' },
                { rank: 9, symbol: 'AVAX', name: 'Avalanche', price: 42, change: 3.8, category: 'layer1' },
                { rank: 10, symbol: 'DOT', name: 'Polkadot', price: 8.15, change: 0.9, category: 'layer1' }
            ]
        };

        // DOM Elements
        const elements = {
            walletAddress: document.getElementById('walletAddress'),
            addressText: document.getElementById('addressText'),
            walletIcon: document.getElementById('walletIcon'),
            copyAddressBtn: document.getElementById('copyAddressBtn'),
            explorerBtn: document.getElementById('explorerBtn'),
            detectedWallets: document.getElementById('detectedWallets'),
            connectWalletBtn: document.getElementById('connectWalletBtn'),
            disconnectWalletBtn: document.getElementById('disconnectWalletBtn'),
            walletDropdown: document.getElementById('walletDropdown'),
            ankrBalance: document.getElementById('ankrBalance'),
            activePredictions: document.getElementById('activePredictions'),
            totalPredictions: document.getElementById('totalPredictions'),
            ownerStatus: document.getElementById('ownerStatus'),
            ownerBadge: document.getElementById('ownerBadge'),
            winRate: document.getElementById('winRate'),
            predictionProgress: document.getElementById('predictionProgress'),
            predictionTimer: document.getElementById('predictionTimer'),
            timerCountdown: document.getElementById('timerCountdown'),
            aiSuggestion: document.getElementById('aiSuggestion'),
            suggestionText: document.getElementById('suggestionText'),
            suggestionRisk: document.getElementById('suggestionRisk'),
            pendingPredictions: document.getElementById('pendingPredictions'),
            pendingCount: document.getElementById('pendingCount'),
            pendingList: document.getElementById('pendingList'),
            topTraders: document.getElementById('topTraders'),
            assetsGrid: document.getElementById('assetsGrid'),
            transactionHistory: document.getElementById('transactionHistory'),
            addLiquidityBtn: document.getElementById('addLiquidityBtn'),
            placePredictionBtn: document.getElementById('placePredictionBtn'),
            liquidityGas: document.getElementById('liquidityGas'),
            predictionGas: document.getElementById('predictionGas'),
            gasPrice: document.getElementById('gasPrice'),
            chainId: document.getElementById('chainId'),
            currentNetwork: document.getElementById('currentNetwork'),
            footerChainId: document.getElementById('footerChainId'),
            dailyVolume: document.getElementById('dailyVolume'),
            tvlValue: document.getElementById('tvlValue'),
            avgROI: document.getElementById('avgROI'),
            activeUsers: document.getElementById('activeUsers'),
            marketSentiment: document.getElementById('marketSentiment'),
            sentimentBar: document.getElementById('sentimentBar')
        };

        // Notification System
        class NotificationSystem {
            static show(message, type = 'info', duration = 3000) {
                const container = document.getElementById('notificationContainer');
                const notification = document.createElement('div');
                
                notification.className = `fade-in`;
                notification.innerHTML = `
                    <div style="background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'}; 
                         color: white; padding: 12px 20px; border-radius: 8px; margin-bottom: 10px; 
                         display: flex; align-items: center; gap: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);">
                        <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                        <span>${message}</span>
                    </div>
                `;
                
                container.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.opacity = '0';
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => notification.remove(), 300);
                }, duration);
            }
        }

        // Wallet Manager
        class WalletManager {
            static async detectWallets() {
                const wallets = {
                    metamask: typeof window.ethereum !== 'undefined' && window.ethereum.isMetaMask,
                    okx: typeof window.okxwallet !== 'undefined',
                    rabby: typeof window.rabby !== 'undefined',
                    trust: typeof window.trustwallet !== 'undefined',
                    coinbase: typeof window.coinbaseWalletExtension !== 'undefined'
                };
                
                return wallets;
            }
            
            static async connect(walletType) {
                try {
                    let provider;
                    
                    switch(walletType) {
                        case 'metamask':
                            provider = window.ethereum;
                            break;
                        case 'okx':
                            provider = window.okxwallet;
                            break;
                        case 'rabby':
                            provider = window.rabby?.ethereum;
                            break;
                        case 'trust':
                            provider = window.trustwallet || (window.ethereum?.isTrust ? window.ethereum : null);
                            break;
                        case 'coinbase':
                            provider = window.coinbaseWalletExtension || 
                                      (window.ethereum?.isCoinbaseWallet ? window.ethereum : null);
                            break;
                        default:
                            throw new Error('Wallet not supported');
                    }
                    
                    if (!provider) {
                        throw new Error('Wallet not detected');
                    }
                    
                    // Request accounts
                    const accounts = await provider.request({ method: 'eth_requestAccounts' });
                    
                    if (accounts.length === 0) {
                        throw new Error('No accounts found');
                    }
                    
                    // Switch to Neura network
                    await this.switchToNeuraNetwork(provider);
                    
                    // Get ethers provider
                    const ethersProvider = new ethers.BrowserProvider(provider);
                    const signer = await ethersProvider.getSigner();
                    
                    return {
                        provider,
                        ethersProvider,
                        signer,
                        address: accounts[0]
                    };
                    
                } catch (error) {
                    console.error('Wallet connection error:', error);
                    throw error;
                }
            }
            
            static async switchToNeuraNetwork(provider) {
                try {
                    const chainId = await provider.request({ method: 'eth_chainId' });
                    
                    if (chainId !== CONFIG.NETWORK.chainId) {
                        try {
                            await provider.request({
                                method: 'wallet_switchEthereumChain',
                                params: [{ chainId: CONFIG.NETWORK.chainId }]
                            });
                        } catch (switchError) {
                            if (switchError.code === 4902) {
                                await provider.request({
                                    method: 'wallet_addEthereumChain',
                                    params: [{
                                        chainId: CONFIG.NETWORK.chainId,
                                        chainName: CONFIG.NETWORK.chainName,
                                        rpcUrls: CONFIG.NETWORK.rpcUrls,
                                        nativeCurrency: {
                                            name: 'ANKR',
                                            symbol: 'ANKR',
                                            decimals: 18
                                        },
                                        blockExplorerUrls: [CONFIG.NETWORK.blockExplorer]
                                    }]
                                });
                            }
                        }
                    }
                } catch (error) {
                    console.warn('Network switch error:', error);
                }
            }
        }

        // Asset Manager
        class AssetManager {
            static renderAssets(assets) {
                elements.assetsGrid.innerHTML = '';
                
                assets.forEach(asset => {
                    const isSelected = state.selectedAsset?.symbol === asset.symbol;
                    const changeClass = asset.change >= 0 ? 'positive' : 'negative';
                    const changeSymbol = asset.change >= 0 ? '+' : '';
                    
                    const assetCard = document.createElement('div');
                    assetCard.className = `asset-card ${isSelected ? 'selected' : ''}`;
                    assetCard.dataset.symbol = asset.symbol;
                    
                    assetCard.innerHTML = `
                        <div class="asset-rank">${asset.rank}</div>
                        <div class="asset-header">
                            <div class="asset-icon">${asset.symbol.charAt(0)}</div>
                            <span class="asset-name">${asset.symbol}</span>
                        </div>
                        <div class="asset-symbol">${asset.name}</div>
                        <div class="asset-price">$${this.formatPrice(asset.price)}</div>
                        <div class="asset-change ${changeClass}">
                            ${changeSymbol}${asset.change.toFixed(1)}%
                        </div>
                        <div class="price-trend">
                            <div class="trend-line ${changeClass}"></div>
                        </div>
                    `;
                    
                    assetCard.addEventListener('click', () => {
                        state.selectedAsset = asset;
                        this.renderAssets(assets);
                        this.updateEntryPrice(asset.price);
                        this.generateAISuggestion(asset);
                        this.drawPriceChart();
                        this.updateRiskCalculator();
                        NotificationSystem.show(`${asset.symbol} selected`, 'info');
                    });
                    
                    elements.assetsGrid.appendChild(assetCard);
                });
            }
            
            static formatPrice(price) {
                if (price >= 1000) {
                    return price.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
                } else if (price >= 1) {
                    return price.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
                } else {
                    return price.toFixed(6);
                }
            }
            
            static updateEntryPrice(price) {
                const entryPriceInput = document.getElementById('entry-price');
                if (entryPriceInput) {
                    entryPriceInput.value = price.toFixed(price >= 1 ? 2 : 6);
                }
            }
            
            static generateAISuggestion(asset) {
                const suggestions = [
                    `Based on RSI analysis, ${asset.symbol} shows oversold conditions with strong buy signals.`,
                    `Volume spike detected on ${asset.symbol} indicating potential breakout.`,
                    `${asset.symbol} trading near key support level with 85% bounce probability.`,
                    `Market sentiment turning bullish on ${asset.symbol} across exchanges.`
                ];
                
                const risks = ['low', 'medium', 'high'];
                const randomSuggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
                const randomRisk = risks[Math.floor(Math.random() * risks.length)];
                
                elements.suggestionText.textContent = randomSuggestion;
                elements.suggestionRisk.textContent = randomRisk.toUpperCase();
                elements.suggestionRisk.className = `risk-badge risk-${randomRisk}`;
                elements.aiSuggestion.classList.add('show');
            }
            
            static drawPriceChart() {
                const canvas = document.getElementById('chartCanvas');
                if (!canvas) return;
                
                const ctx = canvas.getContext('2d');
                const width = canvas.width;
                const height = canvas.height;
                
                // Clear canvas
                ctx.clearRect(0, 0, width, height);
                
                // Draw grid
                ctx.strokeStyle = '#334155';
                ctx.lineWidth = 1;
                
                // Draw sample data
                const points = 50;
                const data = [];
                let current = 100;
                
                for (let i = 0; i < points; i++) {
                    const change = (Math.random() - 0.5) * 0.1;
                    current = current * (1 + change);
                    data.push(current);
                }
                
                // Find min and max
                const min = Math.min(...data);
                const max = Math.max(...data);
                const range = max - min;
                
                // Draw price line
                const isPositive = data[data.length - 1] > data[0];
                ctx.strokeStyle = isPositive ? '#10b981' : '#ef4444';
                ctx.lineWidth = 2;
                ctx.beginPath();
                
                data.forEach((value, i) => {
                    const x = (width * i) / (points - 1);
                    const y = height - ((value - min) / range) * height;
                    
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                });
                
                ctx.stroke();
            }
            
            static updateRiskCalculator() {
                if (!state.selectedAsset) return;
                
                const leverage = parseInt(document.getElementById('leverage').value) || 10;
                const amount = parseFloat(document.getElementById('predictionAmount').value) || 10;
                
                const potentialProfit = amount * leverage * 0.02;
                const potentialLoss = amount * leverage * 0.01;
                const riskReward = (potentialProfit / potentialLoss).toFixed(1);
                const probability = Math.min(95, Math.max(30, 70 - leverage * 2));
                
                let riskLevel = 'low';
                if (leverage >= 15) riskLevel = 'high';
                else if (leverage >= 10) riskLevel = 'medium';
                
                // Update UI
                document.getElementById('riskLevel').textContent = riskLevel.toUpperCase();
                document.getElementById('riskLevel').className = `risk-badge risk-${riskLevel}`;
                document.getElementById('potentialProfit').textContent = `$${potentialProfit.toFixed(2)}`;
                document.getElementById('potentialLoss').textContent = `$${potentialLoss.toFixed(2)}`;
                document.getElementById('riskReward').textContent = `${riskReward}:1`;
                document.getElementById('successProbability').textContent = `${probability}%`;
                document.getElementById('predictionGas').textContent = (leverage * 0.01).toFixed(4);
            }
        }

        // Transaction Manager
        class TransactionManager {
            static updateTransactionHistory() {
                const tbody = elements.transactionHistory;
                
                if (state.transactions.length === 0) {
                    tbody.innerHTML = `
                        <tr>
                            <td colspan="8" style="text-align: center; padding: 40px; color: #94a3b8;">
                                <i class="fas fa-history" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                                <p>No transactions yet</p>
                                <p style="font-size: 0.9rem; margin-top: 5px;">Make your first prediction!</p>
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                let html = '';
                state.transactions.forEach(tx => {
                    const directionColor = tx.direction === 'up' ? '#10b981' : '#ef4444';
                    const directionIcon = tx.direction === 'up' ? 'arrow-up' : 'arrow-down';
                    const statusClass = tx.status === 'success' ? 'status-ready' : 
                                       tx.status === 'pending' ? 'status-pending' : 'status-failed';
                    
                    html += `
                        <tr style="border-bottom: 1px solid #334155;">
                            <td style="padding: 12px 15px; font-family: monospace; font-size: 0.8rem;">
                                ${tx.hash.substring(0, 10)}...${tx.hash.substring(tx.hash.length - 8)}
                            </td>
                            <td style="padding: 12px 15px;">${tx.asset}</td>
                            <td style="padding: 12px 15px; color: ${directionColor};">
                                <i class="fas fa-${directionIcon}"></i> ${tx.direction?.toUpperCase() || '--'}
                            </td>
                            <td style="padding: 12px 15px;">${tx.entry}</td>
                            <td style="padding: 12px 15px;">${tx.current || '--'}</td>
                            <td style="padding: 12px 15px; color: ${tx.result && tx.result.includes('+') ? '#10b981' : '#ef4444'};">
                                ${tx.result || '--'}
                            </td>
                            <td style="padding: 12px 15px;">${tx.value}</td>
                            <td style="padding: 12px 15px;">
                                <span class="status-badge ${statusClass}" style="background: ${tx.status === 'success' ? '#10b98120' : tx.status === 'pending' ? '#f59e0b20' : '#ef444420'}; 
                                      color: ${tx.status === 'success' ? '#10b981' : tx.status === 'pending' ? '#f59e0b' : '#ef4444'};">
                                    ${tx.status.toUpperCase()}
                                </span>
                            </td>
                        </tr>
                    `;
                });
                
                tbody.innerHTML = html;
            }
            
            static addTransaction(tx) {
                state.transactions.unshift(tx);
                this.updateTransactionHistory();
            }
        }

        // UI Manager
        class UIManager {
            static updateUI() {
                this.updateWalletDisplay();
                this.updateStatistics();
                this.updateButtons();
                this.updateMarketData();
            }
            
            static updateWalletDisplay() {
                if (state.isConnected) {
                    const formattedAddress = `${state.walletAddress.substring(0, 6)}...${state.walletAddress.substring(state.walletAddress.length - 4)}`;
                    elements.addressText.textContent = `${formattedAddress} (${state.walletType})`;
                    elements.walletAddress.classList.add('connected');
                    elements.walletIcon.style.display = 'inline-block';
                    elements.copyAddressBtn.style.display = 'block';
                    elements.explorerBtn.style.display = 'block';
                    elements.connectWalletBtn.style.display = 'none';
                    elements.disconnectWalletBtn.style.display = 'flex';
                    
                    // Update chain ID
                    elements.chainId.textContent = '267';
                    elements.footerChainId.textContent = '267';
                    
                } else {
                    elements.addressText.textContent = 'Not connected';
                    elements.walletAddress.classList.remove('connected');
                    elements.walletIcon.style.display = 'none';
                    elements.copyAddressBtn.style.display = 'none';
                    elements.explorerBtn.style.display = 'none';
                    elements.connectWalletBtn.style.display = 'flex';
                    elements.disconnectWalletBtn.style.display = 'none';
                    
                    elements.chainId.textContent = '--';
                }
            }
            
            static updateStatistics() {
                elements.ankrBalance.textContent = parseFloat(state.balance).toFixed(2);
                elements.activePredictions.textContent = state.activePredictions;
                elements.totalPredictions.textContent = state.totalPredictions;
                
                // Update win rate
                if (state.totalPredictions > 0) {
                    const winRate = Math.floor((state.totalPredictions - state.activePredictions) / state.totalPredictions * 100);
                    elements.winRate.textContent = `Win Rate: ${winRate}%`;
                }
                
                // Update owner status
                if (state.isOwner) {
                    elements.ownerStatus.textContent = 'Contract Owner';
                    elements.ownerBadge.style.display = 'inline-block';
                } else {
                    elements.ownerStatus.textContent = 'Connected';
                    elements.ownerBadge.style.display = 'none';
                }
                
                // Update progress bar
                const progress = Math.min(100, (state.activePredictions / 10) * 100);
                elements.predictionProgress.style.width = `${progress}%`;
            }
            
            static updateButtons() {
                elements.addLiquidityBtn.disabled = !state.isConnected;
                elements.placePredictionBtn.disabled = !state.isConnected || !state.selectedAsset;
                
                // Show/hide advanced features
                if (state.isConnected) {
                    elements.aiSuggestion.classList.add('show');
                    elements.pendingPredictions.classList.add('show');
                    elements.predictionTimer.classList.add('show');
                } else {
                    elements.aiSuggestion.classList.remove('show');
                    elements.pendingPredictions.classList.remove('show');
                    elements.predictionTimer.classList.remove('show');
                }
            }
            
            static updateMarketData() {
                // Update gas price
                elements.gasPrice.textContent = (Math.random() * 10 + 2).toFixed(2);
                
                // Update market data
                elements.dailyVolume.textContent = `$${(Math.random() * 1000000).toLocaleString('en-US', {minimumFractionDigits: 0})}`;
                elements.tvlValue.textContent = `$${(Math.random() * 5000000).toLocaleString('en-US', {minimumFractionDigits: 0})}`;
                elements.avgROI.textContent = `${(Math.random() * 20).toFixed(1)}%`;
                elements.activeUsers.textContent = Math.floor(Math.random() * 1000) + 100;
                
                // Update sentiment
                const sentiment = Math.random();
                elements.marketSentiment.textContent = 
                    sentiment > 0.6 ? 'Bullish' : sentiment < 0.4 ? 'Bearish' : 'Neutral';
                elements.sentimentBar.style.width = `${sentiment * 100}%`;
            }
            
            static updatePendingPredictions() {
                if (state.activePredictions === 0) {
                    elements.pendingList.innerHTML = `
                        <div class="pending-item">
                            <span style="color: #94a3b8;">No pending predictions</span>
                        </div>
                    `;
                    return;
                }
                
                const pending = [
                    { asset: 'ANKR', direction: 'up', timeLeft: '04:30', value: '$500' },
                    { asset: 'BTC', direction: 'down', timeLeft: '12:15', value: '$250' }
                ];
                
                let html = '';
                pending.forEach(pred => {
                    html += `
                        <div class="pending-item">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span>${pred.asset}</span>
                                <span style="background: ${pred.direction === 'up' ? '#10b98120' : '#ef444420'}; 
                                      color: ${pred.direction === 'up' ? '#10b981' : '#ef4444'}; 
                                      padding: 2px 8px; border-radius: 4px; font-size: 0.8rem;">
                                    ${pred.direction === 'up' ? ' UP' : ' DOWN'}
                                </span>
                            </div>
                            <div>${pred.timeLeft}</div>
                            <div>${pred.value}</div>
                        </div>
                    `;
                });
                
                elements.pendingList.innerHTML = html;
                elements.pendingCount.textContent = pending.length;
            }
            
            static updateTopTraders() {
                const traders = [
                    { rank: 1, address: '0x1234...5678', profit: '+245%' },
                    { rank: 2, address: '0x2345...6789', profit: '+189%' },
                    { rank: 3, address: '0x3456...7890', profit: '+156%' },
                    { rank: 4, address: '0x4567...8901', profit: '+132%' },
                    { rank: 5, address: '0x5678...9012', profit: '+98%' }
                ];
                
                let html = '';
                traders.forEach(trader => {
                    html += `
                        <div class="trader-item">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="background: #3b82f6; color: white; width: 24px; height: 24px; 
                                     border-radius: 50%; display: flex; align-items: center; justify-content: center; 
                                     font-size: 0.8rem; font-weight: bold;">
                                    ${trader.rank}
                                </div>
                                <span>${trader.address}</span>
                            </div>
                            <div class="performance-badge performance-positive">
                                ${trader.profit}
                            </div>
                        </div>
                    `;
                });
                
                elements.topTraders.innerHTML = html;
            }
        }

        // Main Application
        class NeuralLensApp {
            constructor() {
                this.timerInterval = null;
                this.refreshInterval = null;
            }
            
            async init() {
                try {
                    // Initialize wallet detection
                    await this.detectWallets();
                    
                    // Initialize assets
                    AssetManager.renderAssets(state.assets);
                    
                    // Select ANKR by default
                    state.selectedAsset = state.assets[0];
                    AssetManager.renderAssets(state.assets);
                    AssetManager.updateEntryPrice(state.assets[0].price);
                    AssetManager.generateAISuggestion(state.assets[0]);
                    AssetManager.drawPriceChart();
                    AssetManager.updateRiskCalculator();
                    
                    // Setup event listeners
                    this.setupEventListeners();
                    
                    // Update UI
                    UIManager.updateUI();
                    UIManager.updatePendingPredictions();
                    UIManager.updateTopTraders();
                    TransactionManager.updateTransactionHistory();
                    
                    // Start prediction timer
                    this.startPredictionTimer();
                    
                    // Start auto-refresh
                    this.startAutoRefresh();
                    
                    console.log('Neura Testnet initialized');
                    
                } catch (error) {
                    console.error('Initialization error:', error);
                    NotificationSystem.show('Failed to initialize app', 'error');
                }
            }
            
            async detectWallets() {
                try {
                    const wallets = await WalletManager.detectWallets();
                    const detected = Object.entries(wallets)
                        .filter(([_, available]) => available)
                        .map(([name]) => this.formatWalletName(name));
                    
                    elements.detectedWallets.textContent = detected.length > 0 ? detected.join(', ') : 'None';
                    
                    // Update wallet dropdown
                    this.updateWalletDropdown(wallets);
                    
                } catch (error) {
                    console.error('Wallet detection error:', error);
                }
            }
            
            updateWalletDropdown(wallets) {
                const walletOptions = [
                    { id: 'metamask', name: 'MetaMask', icon: 'fab fa-metamask' },
                    { id: 'okx', name: 'OKX Wallet', icon: 'fas fa-wallet' },
                    { id: 'rabby', name: 'Rabby Wallet', icon: 'fas fa-shield-alt' },
                    { id: 'trust', name: 'Trust Wallet', icon: 'fas fa-mobile-alt' },
                    { id: 'coinbase', name: 'Coinbase Wallet', icon: 'fab fa-coinbase' }
                ];
                
                let html = '';
                walletOptions.forEach(wallet => {
                    const isAvailable = wallets[wallet.id];
                    
                    html += `
                        <button class="wallet-option ${!isAvailable ? 'unavailable' : ''}" 
                                data-wallet="${wallet.id}"
                                ${!isAvailable ? 'disabled' : ''}>
                            <i class="${wallet.icon}"></i>
                            <span class="wallet-name">${wallet.name}</span>
                            <span class="wallet-status">
                                ${isAvailable ? 'Available' : 'Not detected'}
                            </span>
                        </button>
                    `;
                });
                
                elements.walletDropdown.innerHTML = html;
            }
            
            async connectWallet(walletType) {
                try {
                    NotificationSystem.show(`Connecting with ${this.formatWalletName(walletType)}...`, 'info');
                    
                    if (CONFIG.DEMO_MODE) {
                        // Demo mode
                        this.connectWalletDemo(walletType);
                    } else {
                        // Real wallet connection
                        const connection = await WalletManager.connect(walletType);
                        
                        state.isConnected = true;
                        state.walletType = walletType;
                        state.walletAddress = connection.address;
                        state.provider = connection.provider;
                        state.signer = connection.signer;
                        
                        // Load data
                        await this.loadUserData();
                    }
                    
                    UIManager.updateUI();
                    NotificationSystem.show(`Connected with ${this.formatWalletName(walletType)}!`, 'success');
                    
                    // Close dropdown
                    elements.walletDropdown.classList.remove('show');
                    
                } catch (error) {
                    console.error('Connect wallet error:', error);
                    NotificationSystem.show(`Connection failed: ${error.message}`, 'error');
                    
                    // Fallback to demo mode
                    if (!CONFIG.DEMO_MODE) {
                        this.connectWalletDemo(walletType);
                    }
                }
            }
            
            connectWalletDemo(walletType) {
                // Generate demo address
                const demoAddress = '0x' + Array.from({length: 40}, () => 
                    Math.floor(Math.random() * 16).toString(16)).join('');
                
                state.isConnected = true;
                state.walletType = walletType;
                state.walletAddress = demoAddress;
                state.balance = (Math.random() * 1000 + 100).toFixed(2);
                state.activePredictions = Math.floor(Math.random() * 5);
                state.totalPredictions = Math.floor(Math.random() * 20) + 5;
                state.isOwner = Math.random() > 0.7;
                
                // Add demo transactions
                state.transactions = [
                    {
                        hash: '0x' + Array.from({length: 64}, () => Math.floor(Math.random() * 16).toString(16)).join(''),
                        asset: 'ANKR',
                        direction: 'up',
                        entry: '$0.048',
                        current: '$0.050',
                        result: '+4.17%',
                        value: '$500',
                        status: 'success'
                    },
                    {
                        hash: '0x' + Array.from({length: 64}, () => Math.floor(Math.random() * 16).toString(16)).join(''),
                        asset: 'BTC',
                        direction: 'down',
                        entry: '$54,800',
                        current: '$54,500',
                        result: '+0.55%',
                        value: '$250',
                        status: 'success'
                    }
                ];
                
                UIManager.updateUI();
                UIManager.updatePendingPredictions();
                TransactionManager.updateTransactionHistory();
            }
            
            disconnectWallet() {
                // Clear intervals
                if (this.timerInterval) clearInterval(this.timerInterval);
                if (this.refreshInterval) clearInterval(this.refreshInterval);
                
                // Reset state
                state.isConnected = false;
                state.walletAddress = '';
                state.walletType = '';
                state.provider = null;
                state.signer = null;
                state.balance = '0';
                state.activePredictions = 0;
                state.totalPredictions = 0;
                state.isOwner = false;
                state.transactions = [];
                state.pendingPredictions = [];
                
                // Update UI
                UIManager.updateUI();
                TransactionManager.updateTransactionHistory();
                
                NotificationSystem.show('Wallet disconnected', 'info');
            }
            
            async loadUserData() {
                if (!state.isConnected) return;
                
                try {
                    // Load balance
                    state.balance = (Math.random() * 1000 + 100).toFixed(2);
                    
                    // Load predictions
                    state.activePredictions = Math.floor(Math.random() * 5);
                    state.totalPredictions = Math.floor(Math.random() * 20) + 5;
                    
                    UIManager.updateUI();
                    
                } catch (error) {
                    console.error('Load user data error:', error);
                }
            }
            
            async addLiquidity(amount) {
                try {
                    if (!state.isConnected) {
                        NotificationSystem.show('Please connect wallet first', 'error');
                        return;
                    }
                    
                    if (!amount || parseFloat(amount) < 1) {
                        NotificationSystem.show('Please enter a valid amount (min: 1 ANKR)', 'error');
                        return;
                    }
                    
                    // Show loading
                    elements.addLiquidityBtn.classList.add('loading');
                    elements.addLiquidityText.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Adding...';
                    
                    // Simulate transaction delay
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    // Update balance
                    state.balance = (parseFloat(state.balance) + parseFloat(amount)).toFixed(2);
                    
                    // Add transaction
                    TransactionManager.addTransaction({
                        hash: '0x' + Array.from({length: 64}, () => Math.floor(Math.random() * 16).toString(16)).join(''),
                        type: 'addLiquidity',
                        amount: `${amount} ANKR`,
                        status: 'success',
                        timestamp: Date.now()
                    });
                    
                    // Update UI
                    UIManager.updateUI();
                    
                    NotificationSystem.show(`${amount} ANKR added to liquidity!`, 'success');
                    
                } catch (error) {
                    console.error('Add liquidity error:', error);
                    NotificationSystem.show('Failed to add liquidity', 'error');
                } finally {
                    // Reset button
                    elements.addLiquidityBtn.classList.remove('loading');
                    elements.addLiquidityText.innerHTML = '<i class="fas fa-plus-circle"></i> Add Liquidity';
                }
            }
            
            async makePrediction() {
                try {
                    if (!state.isConnected) {
                        NotificationSystem.show('Please connect wallet first', 'error');
                        return;
                    }
                    
                    if (!state.selectedAsset) {
                        NotificationSystem.show('Please select an asset', 'error');
                        return;
                    }
                    
                    const amount = document.getElementById('predictionAmount').value;
                    const leverage = document.getElementById('leverage').value;
                    const direction = document.querySelector('.direction-btn.selected').dataset.direction;
                    
                    if (!amount || parseFloat(amount) < 1) {
                        NotificationSystem.show('Please enter a valid amount', 'error');
                        return;
                    }
                    
                    // Show loading
                    elements.placePredictionBtn.classList.add('loading');
                    elements.placePredictionText.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Placing...';
                    
                    // Simulate transaction delay
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    // Update predictions
                    state.activePredictions++;
                    state.totalPredictions++;
                    
                    // Add transaction
                    TransactionManager.addTransaction({
                        hash: '0x' + Array.from({length: 64}, () => Math.floor(Math.random() * 16).toString(16)).join(''),
                        asset: state.selectedAsset.symbol,
                        direction: direction,
                        entry: `$${state.selectedAsset.price.toFixed(6)}`,
                        current: '--',
                        result: '--',
                        value: `$${(amount * leverage).toFixed(2)}`,
                        status: 'pending'
                    });
                    
                    // Update UI
                    UIManager.updateUI();
                    UIManager.updatePendingPredictions();
                    
                    NotificationSystem.show('Prediction placed successfully!', 'success');
                    
                } catch (error) {
                    console.error('Make prediction error:', error);
                    NotificationSystem.show('Failed to place prediction', 'error');
                } finally {
                    // Reset button
                    elements.placePredictionBtn.classList.remove('loading');
                    elements.placePredictionText.innerHTML = '<i class="fas fa-rocket"></i> Make Prediction';
                }
            }
            
            startPredictionTimer() {
                let timeLeft = CONFIG.PREDICTION_TIMER;
                
                const updateTimer = () => {
                    const minutes = Math.floor(timeLeft / 60);
                    const seconds = timeLeft % 60;
                    
                    elements.timerCountdown.textContent = 
                        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    
                    if (timeLeft <= 0) {
                        timeLeft = CONFIG.PREDICTION_TIMER;
                        
                        if (state.isConnected) {
                            NotificationSystem.show('New prediction round started!', 'success');
                        }
                    } else {
                        timeLeft--;
                    }
                };
                
                updateTimer();
                this.timerInterval = setInterval(updateTimer, 1000);
            }
            
            startAutoRefresh() {
                this.refreshInterval = setInterval(() => {
                    if (state.isConnected) {
                        UIManager.updateMarketData();
                    }
                }, CONFIG.REFRESH_INTERVAL);
            }
            
            setupEventListeners() {
                // Wallet connection
                elements.connectWalletBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    elements.walletDropdown.classList.toggle('show');
                });
                
                // Wallet dropdown options
                elements.walletDropdown.addEventListener('click', (e) => {
                    const walletOption = e.target.closest('.wallet-option:not(.unavailable)');
                    if (walletOption) {
                        const walletType = walletOption.dataset.wallet;
                        this.connectWallet(walletType);
                    }
                });
                
                // Disconnect wallet
                elements.disconnectWalletBtn.addEventListener('click', () => {
                    this.disconnectWallet();
                });
                
                // Copy address
                elements.copyAddressBtn.addEventListener('click', () => {
                    if (state.walletAddress) {
                        navigator.clipboard.writeText(state.walletAddress)
                            .then(() => NotificationSystem.show('Address copied!', 'success'))
                            .catch(() => NotificationSystem.show('Failed to copy', 'error'));
                    }
                });
                
                // Explorer button
                elements.explorerBtn.addEventListener('click', () => {
                    if (state.walletAddress) {
                        window.open(`${CONFIG.NETWORK.blockExplorer}/address/${state.walletAddress}`, '_blank');
                    }
                });
                
                // Close dropdown when clicking outside
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.wallet-actions')) {
                        elements.walletDropdown.classList.remove('show');
                    }
                });
                
                // Main tabs
                document.querySelectorAll('.main-tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        // Update active tab
                        document.querySelectorAll('.main-tab').forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        
                        // Show corresponding section
                        const tabName = tab.dataset.tab;
                        document.querySelectorAll('.section').forEach(section => {
                            section.classList.remove('active');
                        });
                        document.getElementById(`${tabName}Section`).classList.add('active');
                    });
                });
                
                // Asset filters
                document.querySelectorAll('.filter-tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        
                        const filter = tab.dataset.filter;
                        let filteredAssets = [...state.assets];
                        
                        if (filter === 'top10') {
                            filteredAssets = filteredAssets.filter(a => a.rank <= 10);
                        } else if (filter !== 'all') {
                            filteredAssets = filteredAssets.filter(a => a.category === filter);
                        }
                        
                        AssetManager.renderAssets(filteredAssets);
                    });
                });
                
                // Asset search
                document.getElementById('searchAssets').addEventListener('input', (e) => {
                    const term = e.target.value.toLowerCase();
                    const filteredAssets = state.assets.filter(asset => 
                        asset.symbol.toLowerCase().includes(term) || 
                        asset.name.toLowerCase().includes(term)
                    );
                    AssetManager.renderAssets(filteredAssets);
                });
                
                // Direction buttons
                document.querySelectorAll('.direction-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        document.querySelectorAll('.direction-btn').forEach(b => b.classList.remove('selected'));
                        this.classList.add('selected');
                        AssetManager.updateRiskCalculator();
                    });
                });
                
                // Leverage slider
                document.getElementById('leverage').addEventListener('input', function() {
                    document.getElementById('leverage-value').textContent = this.value + 'x';
                    AssetManager.updateRiskCalculator();
                });
                
                // Prediction amount
                document.getElementById('predictionAmount').addEventListener('input', () => {
                    AssetManager.updateRiskCalculator();
                });
                
                // Add liquidity form
                document.getElementById('liquidityForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    const amount = document.getElementById('amount').value;
                    this.addLiquidity(amount);
                });
                
                // Prediction form
                document.getElementById('predictionForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.makePrediction();
                });
                
                // Simulate prediction
                document.getElementById('simulatePredictionBtn').addEventListener('click', () => {
                    if (!state.selectedAsset) {
                        NotificationSystem.show('Please select an asset first', 'warning');
                        return;
                    }
                    NotificationSystem.show('Simulation completed. Check risk calculator for results.', 'info');
                });
                
                // Quick actions
                document.getElementById('quickTrade').addEventListener('click', () => {
                    document.querySelector('[data-tab="predict"]').click();
                    if (!state.selectedAsset) {
                        NotificationSystem.show('Please select an asset first', 'warning');
                    }
                });
                
                document.getElementById('openFaucet').addEventListener('click', () => {
                    window.open(`${CONFIG.NETWORK.blockExplorer}/faucet`, '_blank');
                });
                
                document.getElementById('viewLeaderboard').addEventListener('click', () => {
                    NotificationSystem.show('Leaderboard feature coming soon!', 'info');
                });
                
                document.getElementById('quickWithdraw').addEventListener('click', () => {
                    NotificationSystem.show('Withdraw feature coming soon!', 'info');
                });
                
                // Refresh data
                document.getElementById('refreshStatsBtn').addEventListener('click', async () => {
                    NotificationSystem.show('Refreshing data...', 'info');
                    await this.loadUserData();
                    UIManager.updateMarketData();
                    NotificationSystem.show('Data refreshed!', 'success');
                });
                
                // Export data
                document.getElementById('exportDataBtn').addEventListener('click', () => {
                    NotificationSystem.show('Export feature coming soon!', 'info');
                });
                
                // Export history
                document.getElementById('exportHistory').addEventListener('click', () => {
                    NotificationSystem.show('Export history feature coming soon!', 'info');
                });
                
                // Clear history
                document.getElementById('clearHistory').addEventListener('click', () => {
                    if (state.transactions.length === 0) {
                        NotificationSystem.show('No transactions to clear', 'warning');
                        return;
                    }
                    
                    if (confirm('Are you sure you want to clear all transaction history?')) {
                        state.transactions = [];
                        TransactionManager.updateTransactionHistory();
                        NotificationSystem.show('Transaction history cleared', 'success');
                    }
                });
                
                // Refresh traders
                document.getElementById('refreshTraders').addEventListener('click', () => {
                    UIManager.updateTopTraders();
                    NotificationSystem.show('Traders list refreshed', 'success');
                });
                
                // Chart timeframe
                document.querySelectorAll('.timeframe-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        document.querySelectorAll('.timeframe-btn').forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        AssetManager.drawPriceChart();
                    });
                });
                
                // Settings toggle
                document.getElementById('settingsToggle').addEventListener('click', () => {
                    NotificationSystem.show('Settings feature coming soon!', 'info');
                });
                
                // Listen for wallet changes
                if (window.ethereum) {
                    window.ethereum.on('accountsChanged', (accounts) => {
                        if (accounts.length === 0) {
                            this.disconnectWallet();
                        } else if (state.isConnected) {
                            state.walletAddress = accounts[0];
                            UIManager.updateUI();
                            NotificationSystem.show('Account changed', 'info');
                        }
                    });
                    
                    window.ethereum.on('chainChanged', () => {
                        window.location.reload();
                    });
                }
            }
            
            formatWalletName(walletType) {
                const names = {
                    metamask: 'MetaMask',
                    okx: 'OKX Wallet',
                    rabby: 'Rabby Wallet',
                    trust: 'Trust Wallet',
                    coinbase: 'Coinbase Wallet'
                };
                return names[walletType] || walletType;
            }
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            const app = new NeuralLensApp();
            app.init();
        });
    </script>
</body>
</html>
